{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"ngx-spinner\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"../Services/Login.service\";\nimport * as i6 from \"@angular/forms\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(http, router, spinner, toastr, loginService) {\n      this.http = http;\n      this.router = router;\n      this.spinner = spinner;\n      this.toastr = toastr;\n      this.loginService = loginService;\n      this.username = '';\n      this.password = '';\n      this.errorMessage = '';\n    }\n\n    ngOnInit() {}\n\n    onLogin() {\n      this.loginService.login(this.username, this.password).subscribe({\n        next: response => {\n          this.spinner.show();\n          this.toastr.success('Login realizado com sucesso', 'Sucesso');\n          this.spinner.hide();\n          console.log('Resposta do login:', response); // Armazenando o token no localStorage\n\n          const token = response.token;\n          localStorage.setItem('token', token); // Decodificando o token para obter o papel (role)\n\n          const decodedToken = this.decodeToken(token);\n          console.log('Decoded token:', decodedToken);\n          const role = decodedToken.role;\n          console.log('Role:', role); // Acessando o papel (role) do usuário do token\n          // Armazenando o login e o papel do usuário como string\n\n          localStorage.setItem('userLogin', response.users.login);\n          localStorage.setItem('role', role);\n          console.log('Role armazenado no LocalStorage:', role); // Redirecionando com base no papel\n\n          if (role === 'admin') {\n            console.log('Redirecionando para /dashboard');\n            this.router.navigate(['/dashboard']);\n          } else if (role === 'user') {\n            console.log('Redirecionando para /clientes');\n            this.router.navigate(['/clientes']);\n          } else {\n            console.log('Role não encontrado, redirecionando para /login');\n            this.router.navigate(['/login']);\n          }\n        },\n        error: () => {\n          this.toastr.error('Usuário ou senha inválidos', 'Erro');\n          this.spinner.hide();\n          this.errorMessage = 'Usuário ou senha inválidos';\n        }\n      });\n    }\n\n    decodeToken(token) {\n      const payload = token.split('.')[1]; // Pega o payload do token\n\n      const decodedPayload = atob(payload); // Decodifica o payload\n\n      return JSON.parse(decodedPayload); // Retorna o payload decodificado\n    }\n\n    onLogout() {}\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.NgxSpinnerService), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.LoginService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-Login\"]],\n    decls: 18,\n    vars: 2,\n    consts: [[1, \"container\"], [1, \"forms-container\"], [1, \"signin\"], [1, \"sign-in-form\", 3, \"ngSubmit\"], [\"src\", \"assets/img/Logo.png\", \"alt\", \"Logo\", 1, \"form-logo\"], [1, \"title\"], [1, \"input-field\"], [1, \"fas\", \"fa-user\"], [\"type\", \"text\", \"placeholder\", \"Usu\\u00E1rio\", \"name\", \"usuario\", \"required\", \"\", \"autocomplete\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fas\", \"fa-lock\"], [\"type\", \"password\", \"placeholder\", \"Senha\", \"name\", \"senha\", \"required\", \"\", \"autocomplete\", \"current-password\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"solid\"], [1, \"panels-container\"], [1, \"panel\", \"left-panel\"], [\"src\", \"assets/img/log.svg\", \"alt\", \"Ilustra\\u00E7\\u00E3o\", 1, \"image\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n          return ctx.onLogin();\n        });\n        i0.ɵɵelement(4, \"img\", 4);\n        i0.ɵɵelementStart(5, \"h2\", 5);\n        i0.ɵɵtext(6, \"Acessar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelement(8, \"i\", 7);\n        i0.ɵɵelementStart(9, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.username = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵelement(11, \"i\", 9);\n        i0.ɵɵelementStart(12, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 11);\n        i0.ɵɵtext(14, \"Entrar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 12);\n        i0.ɵɵelementStart(16, \"div\", 13);\n        i0.ɵɵelement(17, \"img\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.username);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n      }\n    },\n    directives: [i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm, i6.DefaultValueAccessor, i6.RequiredValidator, i6.NgControlStatus, i6.NgModel],\n    styles: [\"@charset \\\"UTF-8\\\";@import\\\"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800&display=swap\\\";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-family:\\\"Poppins\\\",sans-serif}.container[_ngcontent-%COMP%]{position:relative;width:100%;background-color:#fff;min-height:100vh;overflow:hidden}.forms-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.signin[_ngcontent-%COMP%]{position:absolute;top:38%;transform:translate(-50%,-40%);left:75%;width:50%;transition:1s .7s ease-in-out;display:grid;grid-template-columns:1fr;z-index:5}form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:0 5rem;transition:all .2s .7s;overflow:hidden;grid-column:1/2;grid-row:1/2}form.sign-in-form[_ngcontent-%COMP%]{z-index:2}.form-logo[_ngcontent-%COMP%]{width:300px;margin-bottom:-20px;object-fit:contain}.title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:bold;color:#444;background:linear-gradient(270deg,#10c3bb,#ec9aba);background-size:400% 400%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:gradientMove 6s ease infinite;margin-bottom:10px}.input-field[_ngcontent-%COMP%]{max-width:380px;width:100%;background-color:#f0f0f0;margin:10px 0;height:55px;border-radius:55px;display:grid;grid-template-columns:15% 85%;padding:0 .4rem;position:relative}.input-field[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:center;line-height:55px;color:#acacac;transition:.5s;font-size:1.1rem}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:none;outline:none;border:none;line-height:1;font-weight:600;font-size:1.1rem;color:#aaa}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-weight:500}.social-media[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn[_ngcontent-%COMP%]{width:150px;height:49px;border:none;outline:none;border-radius:49px;color:#fff;text-transform:uppercase;font-weight:600;margin:10px 0;cursor:pointer;transition:.5s;background:linear-gradient(270deg,#10c3bb,#ec9aba);background-size:400% 400%;animation:gradientMove 6s ease infinite}.panels-container[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0;display:grid;grid-template-columns:repeat(2,1fr)}.container[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;height:2000px;width:2000px;top:-10%;right:48%;transform:translateY(-50%);background:linear-gradient(270deg,#10c3bb,#ec9aba);background-size:400% 400%;animation:gradientMove 8s ease infinite;transition:1.8s ease-in-out;border-radius:50%;z-index:6}@keyframes gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.image[_ngcontent-%COMP%]{width:100%}.panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;justify-content:space-around;text-align:center;z-index:6}.left-panel[_ngcontent-%COMP%]{pointer-events:all;padding:3rem 17% 2rem 12%}.right-panel[_ngcontent-%COMP%]{pointer-events:none;padding:3rem 12% 2rem 17%}.right-panel[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{transform:translate(800px)}@media (max-width: 1024px){.panels-container[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]:before{display:none}.container[_ngcontent-%COMP%]{background:linear-gradient(270deg,#10c3bb,#ec9aba);background-size:400% 400%;animation:gradientMove 8s ease infinite}.signin[_ngcontent-%COMP%]{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:400px;padding:2rem;background:rgba(255,255,255,.85);border-radius:15px;box-shadow:0 0 20px #0000001a;z-index:10}.form-logo[_ngcontent-%COMP%]{display:block;margin:0 auto 20px;width:180px}form[_ngcontent-%COMP%]{padding:0;width:100%}.title[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center;margin-bottom:20px}.input-field[_ngcontent-%COMP%]{height:50px}.btn[_ngcontent-%COMP%]{width:100%;height:45px;font-size:1rem}}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}